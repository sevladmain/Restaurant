CREATE SEQUENCE cat_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;



CREATE TABLE category (
    id integer GENERATED BY DEFAULT AS SEQUENCE cat_id PRIMARY KEY,
    name character varying(50) NOT NULL
);


--
-- TOC entry 181 (class 1259 OID 8852420)
-- Name: dish_id; Type: SEQUENCE; Schema: xgbua_goit; Owner: -
--

CREATE SEQUENCE dish_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;


--
-- TOC entry 172 (class 1259 OID 8791753)
-- Name: dishes; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE dishes (
    id integer GENERATED BY DEFAULT AS SEQUENCE dish_id PRIMARY KEY,
    id_category integer NOT NULL,
    price integer,
    weight integer,
    name character varying(50)
);


--
-- TOC entry 178 (class 1259 OID 8797222)
-- Name: emp_id; Type: SEQUENCE; Schema: xgbua_goit; Owner: -
--

CREATE SEQUENCE emp_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;


--
-- TOC entry 169 (class 1259 OID 8791715)
-- Name: employee; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE employee (
    id integer GENERATED BY DEFAULT AS SEQUENCE  emp_id PRIMARY KEY,
    first_name character varying(100) NOT NULL,
    last_name character varying(100) NOT NULL,
    date_birth date NOT NULL,
    id_position integer NOT NULL,
    salary integer,
    dtype character varying(30)
);


--
-- TOC entry 2040 (class 0 OID 0)
-- Dependencies: 169
-- Name: TABLE employee; Type: COMMENT; Schema: xgbua_goit; Owner: -
--

COMMENT ON TABLE employee IS 'Сотрудник: сотрудник ресторана (официант, повар, менеджер и т.п.) придумайте несколько возможных должностей сотрудников';


--
-- TOC entry 182 (class 1259 OID 8852422)
-- Name: ing_id; Type: SEQUENCE; Schema: xgbua_goit; Owner: -
--

CREATE SEQUENCE ing_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;


--
-- TOC entry 173 (class 1259 OID 8791774)
-- Name: ingredientlist; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE ingredientlist (
    id_ingredient integer NOT NULL,
    id_dish integer NOT NULL,
    used_amount integer
);


--
-- TOC entry 177 (class 1259 OID 8797212)
-- Name: ingredients; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE ingredients (
    id integer GENERATED BY DEFAULT AS SEQUENCE ing_id PRIMARY KEY,
    name character varying(50) NOT NULL,
    amount integer DEFAULT 0 NOT NULL
);


--
-- TOC entry 183 (class 1259 OID 8852424)
-- Name: men_id; Type: SEQUENCE; Schema: xgbua_goit; Owner: -
--

CREATE SEQUENCE men_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;


--
-- TOC entry 175 (class 1259 OID 8791785)
-- Name: menu; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE menu (
    id integer GENERATED BY DEFAULT AS SEQUENCE men_id PRIMARY KEY,
    name character varying(50) NOT NULL
);


--
-- TOC entry 176 (class 1259 OID 8791790)
-- Name: menulist; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE menulist (
    id_menu integer NOT NULL,
    id_dish integer NOT NULL
);


--
-- TOC entry 184 (class 1259 OID 8852426)
-- Name: ord_id; Type: SEQUENCE; Schema: xgbua_goit; Owner: -
--

CREATE SEQUENCE ord_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;


--
-- TOC entry 171 (class 1259 OID 8791730)
-- Name: orders; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE orders (
    id integer GENERATED BY DEFAULT AS SEQUENCE ord_id PRIMARY KEY,
    id_emp integer NOT NULL,
    table_num integer NOT NULL,
    date date NOT NULL,
    isopen boolean NOT NULL
);


--
-- TOC entry 179 (class 1259 OID 8797225)
-- Name: pos_id; Type: SEQUENCE; Schema: xgbua_goit; Owner: -
--

CREATE SEQUENCE pos_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;


--
-- TOC entry 170 (class 1259 OID 8791720)
-- Name: positions; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE positions (
    id integer GENERATED BY DEFAULT AS SEQUENCE pos_id PRIMARY KEY,
    position character varying(50)
);


--
-- TOC entry 185 (class 1259 OID 8852428)
-- Name: prep_id; Type: SEQUENCE; Schema: xgbua_goit; Owner: -
--

CREATE SEQUENCE prep_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE;


--
-- TOC entry 180 (class 1259 OID 8852222)
-- Name: prepared_dishes; Type: TABLE; Schema: xgbua_goit; Owner: -
--

CREATE TABLE prepared_dishes (
    id integer GENERATED BY DEFAULT AS SEQUENCE prep_id PRIMARY KEY,
    id_dish integer NOT NULL,
    id_employee integer,
    is_prepared boolean DEFAULT false NOT NULL,
    id_order integer
);

INSERT INTO category (id, name) VALUES (1, 'Перші страви');
INSERT INTO category (id, name) VALUES (2, 'Другі страви');
INSERT INTO category (id, name) VALUES (3, 'Десерти');
INSERT INTO category (id, name) VALUES (4, 'Алкоголь');



INSERT INTO dishes (id, id_category, price, weight, name) VALUES (4, 1, 25, 150, 'Зелений борщ');
INSERT INTO dishes (id, id_category, price, weight, name) VALUES (3, 1, 50, 250, 'Борщ');
INSERT INTO dishes (id, id_category, price, weight, name) VALUES (1, 2, 1000, 10, 'Курочка под марінадом');


INSERT INTO employee (id, first_name, last_name, date_birth, id_position, salary, dtype) VALUES (30, 'Надійка', 'Надійка', '1989-05-02', 3, 100000, 'Employee');
INSERT INTO employee (id, first_name, last_name, date_birth, id_position, salary, dtype) VALUES (15, 'Сергій', 'Іванов', '1995-02-06', 1, 5000000, 'Employee');
INSERT INTO employee (id, first_name, last_name, date_birth, id_position, salary, dtype) VALUES (16, 'Олена', 'Сідорова', '2016-12-05', 1, 10000, 'Waiter');
INSERT INTO employee (id, first_name, last_name, date_birth, id_position, salary, dtype) VALUES (18, 'Іван', 'Петрович', '1986-02-03', 3, 5000, 'Waiter');

INSERT INTO ingredientlist (id_ingredient, id_dish, used_amount) VALUES (1, 1, 5);
INSERT INTO ingredientlist (id_ingredient, id_dish, used_amount) VALUES (2, 1, 3);


--
-- TOC entry 2024 (class 0 OID 8797212)
-- Dependencies: 177
-- Data for Name: ingredients; Type: TABLE DATA; Schema: xgbua_goit; Owner: -
--

INSERT INTO ingredients (id, name, amount) VALUES (6, 'М''ясо курки', 500600);
INSERT INTO ingredients (id, name, amount) VALUES (7, 'Курчата', 10);
INSERT INTO ingredients (id, name, amount) VALUES (8, 'Телятина', 1000);
INSERT INTO ingredients (id, name, amount) VALUES (1, 'Картопля', 188);
INSERT INTO ingredients (id, name, amount) VALUES (2, 'Помідори', 344);


INSERT INTO menu (id, name) VALUES (3, 'Бізнес-ланч');
INSERT INTO menu (id, name) VALUES (4, 'Другі страви');
INSERT INTO menu (id, name) VALUES (5, 'Нове меню');
INSERT INTO menu (id, name) VALUES (2, 'Перші страви');


INSERT INTO menulist (id_menu, id_dish) VALUES (0, 0);
INSERT INTO menulist (id_menu, id_dish) VALUES (0, 0);
INSERT INTO menulist (id_menu, id_dish) VALUES (3, 3);
INSERT INTO menulist (id_menu, id_dish) VALUES (4, 2);
INSERT INTO menulist (id_menu, id_dish) VALUES (3, 2);
INSERT INTO menulist (id_menu, id_dish) VALUES (3, 4);
INSERT INTO menulist (id_menu, id_dish) VALUES (5, 3);
INSERT INTO menulist (id_menu, id_dish) VALUES (5, 4);
INSERT INTO menulist (id_menu, id_dish) VALUES (2, 3);


INSERT INTO orders (id, id_emp, table_num, date, isopen) VALUES (3, 16, 3, '2016-11-26', false);
INSERT INTO orders (id, id_emp, table_num, date, isopen) VALUES (5, 15, 2, '2010-01-01', false);
INSERT INTO orders (id, id_emp, table_num, date, isopen) VALUES (6, 18, 3, '2010-01-01', false);
INSERT INTO orders (id, id_emp, table_num, date, isopen) VALUES (7, 15, 3, '2010-01-01', true);

INSERT INTO positions (id, position) VALUES (1, 'Boss');
INSERT INTO positions (id, position) VALUES (2, 'NEWBIE');
INSERT INTO positions (id, position) VALUES (3, 'MANAGER');


INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (14, 3, 18, true, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (11, 3, 16, true, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (23, 4, 16, true, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (22, 3, 18, true, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (25, 1, 15, false, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (8, 3, 18, true, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (3, 4, 15, true, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (1, 1, 15, true, NULL);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (29, 4, 16, true, 7);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (30, 3, 16, true, 7);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (31, 1, 16, true, 7);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (18, 4, 15, true, 6);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (17, 3, 15, true, 6);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (15, 3, 15, true, 5);
INSERT INTO prepared_dishes (id, id_dish, id_employee, is_prepared, id_order) VALUES (10, 4, 15, true, 3);